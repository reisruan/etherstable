<!DOCTYPE html>
<html lang="pt-BR" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Verificador Ethereum</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
    <h1 class="text-2xl font-bold text-center mb-6 text-gray-800">üîé Verificador Ethereum</h1>
    <form id="consultaForm" class="space-y-4">
      <div>
        <label for="tipo" class="block mb-1 font-semibold text-gray-700">Tipo de consulta:</label>
        <select name="tipo" id="tipo" class="w-full p-2 border border-gray-300 rounded-lg">
          <option value="wallet">Carteira (Wallet)</option>
          <option value="txid">Transa√ß√£o (TXID)</option>
        </select>
      </div>
      <div>
        <label for="valor" class="block mb-1 font-semibold text-gray-700">Endere√ßo ou Hash:</label>
        <input type="text" name="valor" id="valor" required class="w-full p-2 border border-gray-300 rounded-lg" />
      </div>
      <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-2 rounded-lg hover:bg-blue-700 transition">
        Consultar
      </button>
    </form>

    <div id="resultado" class="mt-6 p-4 border rounded-lg bg-gray-50 text-gray-700 hidden"></div>
  </div>

  <script>
form.addEventListener('submit', async (e) => {
  e.preventDefault();

  resultadoDiv.classList.add('hidden');
  resultadoDiv.textContent = 'Carregando...';
  resultadoDiv.classList.remove('hidden');

  const tipo = form.tipo.value;
  const valor = form.valor.value.trim();

  const formData = new FormData();
  formData.append('tipo', tipo);
  formData.append('valor', valor);

  try {
    const response = await fetch('/verificar', {
      method: 'POST',
      body: formData
    });

    if (!response.ok) {
      throw new Error(`Erro na requisi√ß√£o: ${response.status}`);
    }

    const data = await response.json();

    if (tipo === 'wallet') {
      if (data.status === '1') {
        resultadoDiv.innerHTML = `
          <strong>Saldo da carteira:</strong> ${data.balance_eth.toFixed(6)} ETH<br/>
          <strong>N√∫mero de transa√ß√µes:</strong> ${data.tx_count}
        `;
      } else {
        resultadoDiv.textContent = `Erro: ${data.message || 'Consulta falhou.'}`;
      }
    } else if (tipo === 'txid') {
      if (data.status === '1') {
        const statusColor = data.tx_status === 'Success' ? 'text-green-600' : 'text-red-600';
        resultadoDiv.innerHTML = `
          <strong>Hash da transa√ß√£o:</strong> ${data.tx_hash}<br/>
          <strong>Status:</strong> <span class="${statusColor} font-semibold">${data.tx_status}</span><br/>
          <strong>De:</strong> ${data.from}<br/>
          <strong>Para:</strong> ${data.to}<br/>
          <strong>Valor:</strong> ${data.value_eth.toFixed(6)} ETH<br/>
          <strong>Bloco:</strong> ${data.block_number || 'Desconhecido'}
        `;
      } else {
        resultadoDiv.textContent = `Erro: ${data.message || 'Consulta falhou.'}`;
      }
    } else {
      resultadoDiv.textContent = 'Tipo inv√°lido.';
    }

  } catch (err) {
    resultadoDiv.textContent = `Erro: ${err.message}`;
  }
});

  </script>
</body>
</html>
